services:
  # Backend (FastAPI)
  backend:
    build: ./backend
    container_name: bitrix-sync-backend
    env_file:
      - .env
    environment:
      DATABASE_URL: ${DATABASE_URL}
      BITRIX_WEBHOOK_URL: ${BITRIX_WEBHOOK_URL}
      DEBUG: ${DEBUG:-false}
    ports:
      - "8080:8080"
    restart: unless-stopped

  # Frontend (React) - for production
  frontend:
    build: ./frontend
    container_name: bitrix-sync-frontend
    depends_on:
      - backend
    environment:
      VITE_API_URL: ${API_URL:-http://localhost:8080}
    ports:
      - "3012:80"
    restart: unless-stopped
